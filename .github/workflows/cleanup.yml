name: Wipe Pages Deployments
on:
  workflow_dispatch: # Allows you to trigger it manually

jobs:
  cleanup:
    runs-on: ubuntu-latest
    permissions:
      deployments: write # Mandatory for deleting deployment history
      contents: write
    steps:
      - name: ðŸ—‘ Delete all deployments
        uses: strumwolf/delete-deployment-environment@v2
        with:
          token: ${{ github.token }}
          # The environment name is usually "github-pages" for static.yml
          environment: github-pages 
          onlyRemoveDeployments: true # Deletes history but keeps the environment active
